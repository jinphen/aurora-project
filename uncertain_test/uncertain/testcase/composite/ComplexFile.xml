<?xml version="1.0" encoding="UTF-8"?>
<a:screen xmlns:a="http://www.aurora-framework.org/application" trace="true">
    <a:view>
        <style><![CDATA[
            .item-fieldset LEGEND {
                margin-left:15px;
                font-weight:400;
                color:blue;
            }
        ]]></style>
        <script><![CDATA[
        	function test(){
        		ds=$('user_info_ds');
	        	var record=ds.getCurrentRecord();
	   //     	alert('${/session/@company_cd}');
	   //     	alert('${/session/@user_id}');
	   //    	alert('${/session/@user_id}');
	   //     	alert('${/session/@org_id}');
	   //     	alert('${/session/@dealer_cd}');
	        	alert(record.get('branchcd'));
	        	alert(record.get('customerflg'));
	  //      	alert(record.get('ctino'));
	        	
        	}
        	
        	// 证件号码位数check

	function CtiNoCheck() {
		var Ctilenght0 = 15;  //要过来改
		var Ctilenght1 = 18;
		ds=$('user_info_ds');
	    var record=ds.getCurrentRecord();
	    
		var CtiNo = record.get('ctino');
		var CtiNoLen=0;
		 if (CtiNo!="" && CtiNo!=null)
		 {
		    CtiNoLen=CtiNo.length;
		 }
		//alert(CtiNoLen);
		var CtiType = record.get('ctitype');
		if(CtiType == 1){
			if(Ctilenght0 != CtiNoLen && Ctilenght1 != CtiNoLen){
			
			  
			  Aurora.showMessage('提示信息','证件号码位数不正确!'); 
			var tf = $('ctino_tf');
                    tf.focus();
				return false;
			}else{
				return true;
			}
		}else{
			return true;
		}
	}
	
	//客户代码check
	function chckCustomerName()
	{
		//客户代码
		ds=$('user_info_ds');
	    var record=ds.getCurrentRecord();
		//var webCustName = record.get('customername');
		//alert(webCustName);
		//if(Ext.isEmpty(webCustName))  //代表没有值
        if(!record.validate('customername'))
		{
			
			var customername_tf = $('customername_tf');
			customername_tf.focus(); 
			Aurora.showMessage('提示信息','客户名称必须输入!'); 
			
			return false;
		}
		return true;
	}
	function checkCtiNoAndSave()
	 {
	 		var error = "";
	 		var ds=$('user_info_ds');
	        var record=ds.getCurrentRecord();
	        var CtiNo = record.get('ctino');
            var ctitype = record.get('ctitype');
		    var dealercd ='${/session/@dealer_cd}';
		    
		    //客户类型
		var cstFlg=record.get('customerflg');
	
		if(cstFlg=="1")
		{
			if(ctitype == "4")
			{
				
				Aurora.showMessage('提示信息','个人客户,证件类型不能为"营业执照"！');
				var ctitype_tf = $('ctitype_tf');
			        ctitype_tf.focus();  
				return false;
			}
		}
		//客户代码
		var ctiNo = record.get('ctiNo');
		if(ctiNo =="")
		{
		
			//alert("证件号码必须输入");
			Aurora.showMessage('提示信息','证件号码必须输入！'); 
			var tf = $('ctino_tf');
                    tf.focus();
			return false;
		}
		else
		{

                                          this.doSave();
//                                      
	 	}
	 }	
        
	
	
	 //地址Check
	function chckAraddr()
	{
		//地址Check
		ds=$('user_info_ds');
	    var record=ds.getCurrentRecord();
		//var araddr = record.get('araddr');
		//alert(araddr);
		if(!record.validate('araddr'))
		{
			
			//alert("地址必须输入!");
            Aurora.showWarningMessage('提示', "地址必须输入!")
			return false;
		}
		return true;
	}
	//邮政编码Check
	function chckArzipCd()
	{
		//邮政编码Check
		ds=$('user_info_ds');
	    var record=ds.getCurrentRecord();
		var arzipCd = record.get('arzipcd');
		
		if(arzipCd == null || arzipCd =="")
		{
			
			alert("邮政编码必须输入!");
		
			return false;
		}
		return true;
	}
	
	//法人名称check
   function checkRptName() {
   ds=$('user_info_ds');
	    var record=ds.getCurrentRecord();

	
		//客户类型
		var cstFlg=record.get('customerflg');
		//alert(cstFlg);
   	if (cstFlg=="2") {
   		var rptName = record.get('rptname');
   		//alert(rptName);
   		if (rptName == null || rptName == "") {
   			alert('客户区分是法人时,法定代表人姓名必须输入！');
   			
   			return false;
   		}
   	}
   	return true;
   }
	function mobtelCheckLength() {
	   ds=$('user_info_ds');
	    var record=ds.getCurrentRecord();
		var mobtel = record.get('mobtel');
		if (mobtel != null)
		{
		var MOBTELValue = mobtel.replace(/(^\s*)|(\s*$$)/g, "");
		
		if(MOBTELValue!=""){
		    var check = /^[0-9]+$$/;
			if(!check.test(MOBTELValue) || MOBTELValue.length!=11 ){
			
			  var tf = $('ctino_tf');
                    tf.focus();
			  alert('手机号码必须为11位数字！');
			  return false;
			}
		}
		}
		return true;
	}
	
	//check 家庭电话
	function checkHomeTel() {
	
	ds=$('user_info_ds');
	    var record=ds.getCurrentRecord();
		var HomeTel = record.get('homtel');
	    var HomeOff = record.get('offtel');
		var HomeMob = record.get('mobtel');
		
		
		if (HomeTel == "" && HomeOff == "" && HomeMob == "") {
			alert("电话(住宅)、(办公室)、(手机)必须输入一项！");
			//alert('<i18n:message key="PAS007_M_009"/>');
			
			return false;
		}
		return true;
	}
	
	function numberRenderer(value, record, name){
                return Aurora.formatNumber(value,2);
            }
	//*******************************
	//	资本到位金check:
	//
	//	资本到位金 > 资本金 时,报错.
	//*******************************
	
	
	function checkCapitalInputed() {
	    ds=$('user_info_ds');
	    var record=ds.getCurrentRecord();
		var capital = record.get('capital');
	    var capitalInputed = record.get('capitalInputed');
		
		
		if (capitalInputed > capital ) {
			alert('资本金到位额 必须小于等于 资本金!');
		
		
			return false;
		}
		return true;
	}
	
	//本次购机情况check
    function checkBuyerInfo() {
       ds=$('user_info_ds');
	    var record=ds.getCurrentRecord();
		var downpaysrc = record.get('downpaysrc');
		var prjstatus=record.get('prjstatus');
		var buyer_equip=record.get('buyer_equip');
	   	if (downpaysrc==null||downpaysrc == "") {
	   		
	   			alert('首付款来源不能为空！');
	  
	   			return false;
	   	}
	   	else if(prjstatus== null||prjstatus== "") {
	   			alert('购机后工程情况不能为空！');
	   			
	   			return false;
	   	}
   		else if(buyer_equip== null||buyer_equip== "") {
	   			alert('购机人与机器位置不能为空！');
	   			
	   			return false;
	   	}
	   	return true;
    }
	function chkDlrBch() {
	   ds=$('user_info_ds');
	   var record=ds.getCurrentRecord();
		var objDlrBch = record.get("branchcd");
		
		if(objDlrBch == "-1"){
			alert('请选择所属代理店(分公司)！');
			return false;
		}
		return true;
	}
	
	
    function insert(){
	        	
                
                
	        	//校验
	        	
	        	//检查是否选择了所属代理店(分公司)
		if(!chkDlrBch()) {

			return;
		}
        
        if (chckAraddr()&&chckCustomerName()&&checkBuyerInfo()&&
            checkHomeTel()&&checkRptName()&&checkCapitalInputed()&&
            mobtelCheckLength()&&CtiNoCheck()&&checkCtiNoAndSave()) {
            
            
        }
                              
    }
        	function doSave(){
	        	ds=$('user_info_ds');
	        	var record=ds.getCurrentRecord();
	        	
	        	var updatedperson ='${/session/@user_id}';
	        	var webcustomercd=record.get('webcustomercd');
	        	var customerflg=record.get('customerflg');
	        	var customername=record.get('customername');
	        	var rptname=record.get('rptname');
	        	var grpname=record.get('grpname');
	        	var ctitype=record.get('ctitype');
	        	var ctino=record.get('ctino');
	        	var sex=record.get('sex');
	        	var birthdt=record.get('birthdt');
	        	var maristatus=record.get('maristatus');
	        	var children=record.get('children');
	        	var homtel=record.get('homtel');
	        	var offtel=record.get('offtel');
	        	var mobtel=record.get('mobtel');
	        	var fax=record.get('fax');
	        	var fnledulev=record.get('fnledulev');
	        	var age=record.get('age');
	        	var arzipcd=record.get('arzipcd');
	        	var araddr=record.get('araddr');
	        	var ararea=record.get('ararea');
	        	var arval=record.get('arval');
	        	var domciattri=record.get('domciattri');
	        	var domciarea=record.get('domciarea');
	        	var domicival=record.get('domicival');
	        	var ntvaddr=record.get('ntvaddr');
	        	var delvinaddr=record.get('delvinaddr');
	        	var cvlengexp=record.get('cvlengexp');
	        	var voctype=record.get('voctype');
	        	var prjplc=record.get('prjplc');
	        	var proexp=record.get('proexp');
	        	var proplc=record.get('proplc');
	        	var income=record.get('income');
	        	var timefrom=record.get('timefrom');
	        	var timeto=record.get('timeto');
	        	var workcontent=record.get('workcontent');
	        	var hownership=record.get('hownership');
	        	var hadd=record.get('hadd');
	        	var harea=record.get('harea');
	        	var hval=record.get('hval');
	        	var operassets=record.get('operassets');
	        	var numofdep=record.get('numofdep');
	        	var famincsrc=record.get('famincsrc');
	        	var fammoninc=record.get('fammoninc');
	        	var famavmonexp=record.get('famavmonexp');
	        	var spousename=record.get('spousename');
	        	var spousectitype=record.get('spousectitype');
	        	var spousectino=record.get('spousectino');
	        	var spousebirthdt=record.get('spousebirthdt');
	        	var spousetel=record.get('spousetel');
	        	var spouseofftel=record.get('spouseofftel');
	        	var spousecomp=record.get('spousecomp');
	        	var spousecompzipcd=record.get('spousecompzipcd');
	        	var spousecompadd=record.get('spousecompadd');
	        	var vtype1=record.get('vtype1');
	        	var vbrand1=record.get('vbrand1');
	     //   	var vqty1=record.get('vqty1');
	        	var numplate1=record.get('numplate1');
	        	var purtime1=record.get('purtime1');
	        	var purpri1=record.get('purpri1');
	        	var vtype2=record.get('vtype2');
	        	var vbrand2=record.get('vbrand2');
	     //   	var vqty2=record.get('vqty2');
	        	var numplate2=record.get('numplate2');
	        	var purtime2=record.get('purtime2');
	        	var purpri2=record.get('purpri2');
	        	var ename1=record.get('ename1');
	        	var emodelcd1=record.get('emodelcd1');
	        	var ebrand1=record.get('ebrand1');
	        	var eqty1=record.get('eqty1');
	        	var epurtime1=record.get('epurtime1');
	        	var epurpri1=record.get('epurpri1');
	        	var ebalance1=record.get('ebalance1');
	        	var debt1=record.get('debt1');
	        	var mortagage1=record.get('mortagage1');
	        	var ename2=record.get('ename2');
	        	var emodelcd2=record.get('emodelcd2');
	        	var ebrand2=record.get('ebrand2');
	        	var eqty2=record.get('eqty2');
	        	var epurtime2=record.get('epurtime2');
	        	var epurpri2=record.get('epurpri2');
	        	var ebalance2=record.get('ebalance2');
	        	var debt2=record.get('debt2');
	        	var mortagage2=record.get('mortagage2');
	        	var ename3=record.get('ename3');
	        	var emodelcd3=record.get('emodelcd3');
	        	var ebrand3=record.get('ebrand3');
	        	var eqty3=record.get('eqty3');
	        	var epurtime3=record.get('epurtime3');
	        	var epurpri3=record.get('epurpri3');
	        	var ebalance3=record.get('ebalance3');
	        	var debt3=record.get('debt3');
	        	var mortagage3=record.get('mortagage3');
	        	var fassets=record.get('fassets');
	        	var capital=record.get('capital');
	        	var capitalinputed=record.get('capitalinputed');
	        	var entprnatr=record.get('entprnatr');
	        	var loansflg=record.get('loansflg');
	        	var loansbankname=record.get('loansbankname');
	        	var loansamt=record.get('loansamt');
	        	var loanscleardt=record.get('loanscleardt');
	        	var otherdebt=record.get('otherdebt');
	        	var creditor=record.get('creditor');
	        	var debtamt=record.get('debtamt');
	        	var debtcleardt=record.get('debtcleardt');
	        	var downpaysrc=record.get('downpaysrc');
	        	var prjstatus=record.get('prjstatus');
	        	var buyer_equip=record.get('buyer_equip');
	        	var contname=record.get('contname');
	        	var contpos=record.get('contpos');
	        	var contemail=record.get('contemail');
	        	var conttel=record.get('conttel');
	        	var contfax=record.get('contfax');
	        	var contzipcd=record.get('contzipcd');
	        	var contaddr=record.get('contaddr');
	        	var contpayresp=record.get('contpayresp');
	        	var contbank=record.get('contbank');
	        	var contaccname=record.get('contaccname');
	        	var contaccount=record.get('contaccount');
	        	var contrelation=record.get('contrelation');
	        	var illustration=record.get('illustration');
	        	var guaname=record.get('guaname');
	        	var guapos=record.get('guapos');
	        	var guaemail=record.get('guaemail');
	        	var guatel=record.get('guatel');
	        	var guafax=record.get('guafax');
	        	var guazipcd=record.get('guazipcd');
	        	var guaaddr=record.get('guaaddr');
	        	var guarptname=record.get('guarptname');
	        	var guacontactname=record.get('guacontactname');
	        	var guacontacpos=record.get('guacontacpos');
	        	var guacontacttel=record.get('guacontacttel');
	        	var guacontactfax=record.get('guacontactfax');
	        	var guafininchg=record.get('guafininchg');
	        	var guabankname=record.get('guabankname');
	        	var guaaccname=record.get('guaaccname');
	        	var guaaccount=record.get('guaaccount');
	        	var guarelation=record.get('guarelation');
	   //     	var regsts=record.get('regsts');
	        	var scbcaccount=record.get('scbcaccount');
	        	var forexconlaw=record.get('forexconlaw');
	        	var exportto=record.get('exportto');
	        	var forexto=record.get('forexto');
	        	var ameearitemobj=record.get('ameearitemobj');
	        	var eccn=record.get('eccn');
	        	var conexa=record.get('conexa');
	        	var listcontrol=record.get('listcontrol');
	        	var files_id=record.get('files_id');
	        	var score=record.get('score');
	        	var partner=record.get('partner');
	        	var ubiety=record.get('ubiety');
	        	var bankbook=record.get('bankbook');
	        	var other_incsrc=record.get('other_incsrc');
	        	var other_incsrckind=record.get('other_incsrckind');
	        	var avmonexp=record.get('avmonexp');
	        	var grab_hitachi=record.get('grab_hitachi');
	        	var paystate_hitachi=record.get('paystate_hitachi');
	        	var payover_due=record.get('payover_due');
	        	var grab_other=record.get('grab_other');
	        	var paystate_other=record.get('paystate_other');
	        	var otherequip=record.get('otherequip');
	        	var paystate_otherequip=record.get('paystate_otherequip');
	        	var vehicle=record.get('vehicle');
	        	var assetprove=record.get('assetprove');
	        	var paycondition=record.get('paycondition');
	        	var factbuy=record.get('factbuy');
	        	var project_period=record.get('project_period');
	        	var relat_purchaser=record.get('relat_purchaser');
	        	var guactitype=record.get('guactitype');
	        	var guactino=record.get('guactino');
	        	var gua_regular=record.get('gua_regular');
	        	var gua_regu_paystate=record.get('gua_regu_paystate');
	        	var guaotherequip=record.get('guaotherequip');
	        	var guapaystate=record.get('guapaystate');
	        	var guahownership=record.get('guahownership');
	        	var guafassets=record.get('guafassets');
	        	var guaassetprove=record.get('guaassetprove');
	        	var sec_guaname=record.get('sec_guaname');
	        	var sec_guapos=record.get('sec_guapos');
	        	var sec_guatel=record.get('sec_guatel');
	        	var sec_guarelation=record.get('sec_guarelation');
	        	var sec_guactitype=record.get('sec_guactitype');
	        	var sec_guactino=record.get('sec_guactino');
	        	var sec_guaaddr=record.get('sec_guaaddr');
	        	var gua_grab_other=record.get('gua_grab_other');
	        	var gua_grab_other_paystate=record.get('gua_grab_other_paystate');
	        	
				Aurora.request({url:'${/request/@context_path}/autocrud/agent.ord.bgt_web_user_info_update/execute',
                                para:{

									
									
									webcustomercd:webcustomercd,
									updatedperson:updatedperson,
									customerflg:customerflg,
									customername:customername,
									rptname:rptname,
									grpname:grpname,
									ctitype:ctitype,
									ctino:ctino,
									sex:sex,
									birthdt:birthdt,
									maristatus:maristatus,
									children:children,
									homtel:homtel,
									offtel:offtel,
									mobtel:mobtel,
									fax:fax,
									fnledulev:fnledulev,
									age:age,
									arzipcd:arzipcd,
									araddr:araddr,
									ararea:ararea,
									arval:arval,
									domciattri:domciattri,
									domciarea:domciarea,
									domicival:domicival,
									ntvaddr:ntvaddr,
									delvinaddr:delvinaddr,
									cvlengexp:cvlengexp,
									voctype:voctype,
									prjplc:prjplc,
									proexp:proexp,
									proplc:proplc,
									income:income,
									timefrom:timefrom,
									timeto:timeto,
									workcontent:workcontent,
									hownership:hownership,
									hadd:hadd,
									harea:harea,
									hval:hval,
									operassets:operassets,
									numofdep:numofdep,
									famincsrc:famincsrc,
									fammoninc:fammoninc,
									famavmonexp:famavmonexp,
									spousename:spousename,
									spousectitype:spousectitype,
									spousectino:spousectino,
									spousebirthdt:spousebirthdt,
									spousetel:spousetel,
									spouseofftel:spouseofftel,
									spousecomp:spousecomp,
									spousecompzipcd:spousecompzipcd,
									spousecompadd:spousecompadd,
									vtype1:vtype1,
									vbrand1:vbrand1,
									numplate1:numplate1,
									purtime1:purtime1,
									purpri1:purpri1,
									vtype2:vtype2,
									vbrand2:vbrand2,
									numplate2:numplate2,
									purtime2:purtime2,
									purpri2:purpri2,
									ename1:ename1,
									emodelcd1:emodelcd1,
									ebrand1:ebrand1,
									eqty1:eqty1,
									epurtime1:epurtime1,
									epurpri1:epurpri1,
									ebalance1:ebalance1,
									debt1:debt1,
									mortagage1:mortagage1,
									ename2:ename2,
									emodelcd2:emodelcd2,
									ebrand2:ebrand2,
									eqty2:eqty2,
									epurtime2:epurtime2,
									epurpri2:epurpri2,
									ebalance2:ebalance2,
									debt2:debt2,
									mortagage2:mortagage2,
									ename3:ename3,
									emodelcd3:emodelcd3,
									ebrand3:ebrand3,
									eqty3:eqty3,
									epurtime3:epurtime3,
									epurpri3:epurpri3,
									ebalance3:ebalance3,
									debt3:debt3,
									mortagage3:mortagage3,
									fassets:fassets,
									capital:capital,
									capitalinputed:capitalinputed,
									entprnatr:entprnatr,
									loansflg:loansflg,
									loansbankname:loansbankname,
									loansamt:loansamt,
									loanscleardt:loanscleardt,
									otherdebt:otherdebt,
									creditor:creditor,
									debtamt:debtamt,
									debtcleardt:debtcleardt,
									downpaysrc:downpaysrc,
									prjstatus:prjstatus,
									buyer_equip:buyer_equip,
									contname:contname,
									contpos:contpos,
									contemail:contemail,
									conttel:conttel,
									contfax:contfax,
									contzipcd:contzipcd,
									contaddr:contaddr,
									contpayresp:contpayresp,
									contbank:contbank,
									contaccname:contaccname,
									contaccount:contaccount,
									contrelation:contrelation,
									illustration:illustration,
									guaname:guaname,
									guapos:guapos,
									guaemail:guaemail,
									guatel:guatel,
									guafax:guafax,
									guazipcd:guazipcd,
									guaaddr:guaaddr,
									guarptname:guarptname,
									guacontactname:guacontactname,
									guacontacpos:guacontacpos,
									guacontacttel:guacontacttel,
									guacontactfax:guacontactfax,
									guafininchg:guafininchg,
									guabankname:guabankname,
									guaaccname:guaaccname,
									guaaccount:guaaccount,
									guarelation:guarelation,
									scbcaccount:scbcaccount,
									forexconlaw:forexconlaw,
									exportto:exportto,
									forexto:forexto,
									ameearitemobj:ameearitemobj,
									eccn:eccn,
									conexa:conexa,
									listcontrol:listcontrol,
									files_id:files_id,
									score:score,
									partner:partner,
									ubiety:ubiety,
									bankbook:bankbook,
									other_incsrc:other_incsrc,
									other_incsrckind:other_incsrckind,
									avmonexp:avmonexp,
									grab_hitachi:grab_hitachi,
									paystate_hitachi:paystate_hitachi,
									payover_due:payover_due,
									grab_other:grab_other,
									paystate_other:paystate_other,
									otherequip:otherequip,
									paystate_otherequip:paystate_otherequip,
									vehicle:vehicle,
									assetprove:assetprove,
									paycondition:paycondition,
									factbuy:factbuy,
									project_period:project_period,
									relat_purchaser:relat_purchaser,
									guactitype:guactitype,
									guactino:guactino,
									gua_regular:gua_regular,
									gua_regu_paystate:gua_regu_paystate,
									guaotherequip:guaotherequip,
									guapaystate:guapaystate,
									guahownership:guahownership,
									guafassets:guafassets,
									guaassetprove:guaassetprove,
									sec_guaname:sec_guaname,
									sec_guapos:sec_guapos,
									sec_guatel:sec_guatel,
									sec_guarelation:sec_guarelation,
									sec_guactitype:sec_guactitype,
									sec_guactino:sec_guactino,
									sec_guaaddr:sec_guaaddr,
									gua_grab_other:gua_grab_other,
									gua_grab_other_paystate:gua_grab_other_paystate
									},
                                success:function(result){
                                   Aurora.post('bgt_web_user_info_update.screen');
                                },
                                scope:this
                              });
                              $('insert').disable();
                    //          Aurora.post('ord_contract_approve_query.screen');
        	}
        	
        	function returnquery(){
        		Aurora.post('bgt_web_user_info_query.screen');
        	}
        	

            
        	function test2(){
        		var ds=$('user_info_ds');
	        	var record=ds.getCurrentRecord();
	        	var customerflg = record.get('customerflg');
	        	
	        	var a = ${/session/@dealer_cd};
	        	
	        	alert(a);
        	}
        	
        	function onUpdate(ds,record,name,value,oldValue){
                if(name == 'loansflg'){
                    if(value =='2'){
                        record.getField('loansbankname').setRequired(true);
                        record.getField('loansamt').setRequired(true);
                        record.getField('loanscleardt').setRequired(true);
                    }else{
                        record.getField('loansbankname').setRequired(false);
                        record.getField('loansamt').setRequired(false);
                        record.getField('loanscleardt').setRequired(false);
                    }
                }
               
               if(name == 'otherDebtFlg'){
                    if(value =='2'){
                        record.getField('creditor').setRequired(true);
												record.getField('debtamt').setRequired(true);
												record.getField('debtcleardt').setRequired(true);
                    }else{
                        record.getField('creditor').setRequired(false);
												record.getField('debtamt').setRequired(false);
												record.getField('debtcleardt').setRequired(false);
                    }
                }
              
		           if(name == 'maristatus'){
                    if(value =='2'){
												record.getField('spousename').setRequired(true);
												record.getField('spousectitype').setRequired(true);
												record.getField('spousectino').setRequired(true);
												
											}
											else {
												record.getField('spousename').setRequired(false);
												record.getField('spousectitype').setRequired(false);
												record.getField('spousectino').setRequired(false);
											
											}
								}
            }
        ]]></script>
        <a:dataSets>
            <a:dataSet id="branchcd_ds" autoQuery="false" model="agent.ord.bgt_web_user_info_branchcd_cmb"/>
            <a:dataSet id="ctitype_ds" lookupCode="HCLC_CtiType"/>
            <a:dataSet id="sex_ds" lookupCode="HCLC_Sex"/>
            <a:dataSet id="children_ds" lookupCode="HCLC_Children"/>
            <a:dataSet id="fnledulev_ds" lookupCode="HCLC_FnlEduLev"/>
            <a:dataSet id="maristatus_ds" lookupCode="HCLC_MariStatus"/>
            <a:dataSet id="domciattri_ds" lookupCode="HCLC_DomciAttri"/>
            <a:dataSet id="entprnatr_ds" lookupCode="HCLC_EntprNatr"/>
            <a:dataSet id="cvlengexp_ds" lookupCode="HCLC_CvlEngExp"/>
            <a:dataSet id="voctype_ds" lookupCode="HCLC_VocType"/>
            <a:dataSet id="prjplc_ds" lookupCode="HCLC_PrjPlc"/>
            <a:dataSet id="workcontent_ds" lookupCode="HCLC_WorkContent"/>
            <a:dataSet id="hownership_ds" lookupCode="HCLC_Hownership"/>
            <a:dataSet id="bankbook_ds" lookupCode="HCLC_bankbook"/>
            <a:dataSet id="spousectitype_ds" lookupCode="HCLC_SpouseCtiType"/>
            <a:dataSet id="numofdep_ds" lookupCode="HCLC_NumofDep"/>
            <a:dataSet id="grab_hitachi_ds" lookupCode="HCLC_grab_hitachi"/>
            <a:dataSet id="paystate_hitachi_ds" lookupCode="HCLC_paystate_hitachi"/>
            <a:dataSet id="payover_due_ds" lookupCode="HCLC_payover_due"/>
            <a:dataSet id="vehicle_ds" lookupCode="HCLC_vehicle"/>
            <a:dataSet id="fassets_ds" lookupCode="HCLC_Fassets"/>
            <a:dataSet id="assetprove_ds" lookupCode="HCLC_assetprove"/>
            <a:dataSet id="downpaysrc_ds" lookupCode="HCLC_DownPaySrc"/>
            <a:dataSet id="paycondition_ds" lookupCode="HCLC_paycondition"/>
            <a:dataSet id="factbuy_ds" lookupCode="HCLC_factbuy"/>
            <a:dataSet id="prjstatus_ds" lookupCode="HCLC_PrjStatus"/>
            <a:dataSet id="project_period_ds" lookupCode="HCLC_project_period"/>
            <a:dataSet id="buyer_equip_ds" lookupCode="HCLC_Buyer_Equip"/>
            <a:dataSet id="ubiety_ds" lookupCode="HCLC_ubiety"/>
            <a:dataSet id="other_incsrc_ds" lookupCode="HCLC_other_incsrc"/>
            <a:dataSet id="grab_other_ds" lookupCode="HCLC_grab_other"/>
            <a:dataSet id="paystate_other_ds" lookupCode="HCLC_paystate_other"/>
            <a:dataSet id="otherequip_ds" lookupCode="HCLC_otherequip"/>
            <a:dataSet id="paystate_otherequip_ds" lookupCode="HCLC_paystate_otherequip"/>
            <a:dataSet id="loansflg_ds" lookupCode="HCLC_loansflg"/>
            <a:dataSet id="otherdebt_ds" lookupCode="HCLC_otherdebt"/>
            <a:dataSet id="guapos_ds" lookupCode="HCLC_guapos"/>
            <a:dataSet id="relat_purchaser_ds" lookupCode="HCLC_relat_purchaser"/>
            <a:dataSet id="guactitype_ds" lookupCode="HCLC_guactitype"/>
            <a:dataSet id="gua_regular_ds" lookupCode="HCLC_gua_regular"/>
            <a:dataSet id="gua_regu_paystate_ds" lookupCode="HCLC_gua_regu_paystate"/>
            <a:dataSet id="gua_grab_other_ds" lookupCode="HCLC_gua_grab_other"/>
            <a:dataSet id="gua_grab_other_paystate_ds" lookupCode="HCLC_gua_grab_other_paystate"/>
            <a:dataSet id="guaotherequip_ds" lookupCode="HCLC_guaotherequip"/>
            <a:dataSet id="guapaystate_ds" lookupCode="HCLC_guapaystate"/>
            <a:dataSet id="guaassetprove_ds" lookupCode="HCLC_guaassetprove"/>
            <a:dataSet id="sec_guarelation_ds" lookupCode="HCLC_sec_guarelation"/>
            <a:dataSet id="sec_guactitype_ds" lookupCode="HCLC_sec_guactitype"/>
            <a:dataSet id="partner_ds" lookupCode="HCLC_partner"/>
            <a:dataSet id="branchcd1">
                <a:datas>
                    <record name="sh" code="1"/>
                    <record name="bj" code="2"/>
                </a:datas>
            </a:dataSet>
            <a:dataSet id="user_info_ds" loadData="true" model="agent.ord.bgt_web_user_info_update" queryUrl="${/request/@context_path}/autocrud/agent.ord.bgt_web_user_info_update/query?webcustomercd=${/parameter/@webcustomercd}">
                <a:fields>
                    <a:field name="branchcd_display" displayField="dealernamedesp" options="branchcd_ds" readOnly="true" returnField="branchcd" valueField="branchcd"/>
                    <a:field name="ctitype_display" displayField="code_value_name" options="ctitype_ds" returnField="ctitype" valueField="code_value_id"/>
                    <a:field name="sex_display" displayField="code_value_name" options="sex_ds" returnField="sex" valueField="code_value_id"/>
                    <a:field name="children_display" displayField="code_value_name" options="children_ds" returnField="children" valueField="code_value_id"/>
                    <a:field name="fnledulev_display" displayField="code_value_name" options="fnledulev_ds" returnField="fnledulev" valueField="code_value_id"/>
                    <a:field name="maristatus_display" displayField="code_value_name" options="maristatus_ds" returnField="maristatus" valueField="code_value_id"/>
                    <a:field name="domciattri_display" displayField="code_value_name" options="domciattri_ds" returnField="domciattri" valueField="code_value_id"/>
                    <a:field name="entprnatr_display" displayField="code_value_name" options="entprnatr_ds" returnField="entprnatr" valueField="code_value_id"/>
                    <a:field name="cvlengexp_display" displayField="code_value_name" options="cvlengexp_ds" returnField="cvlengexp" ue="${l:EOSBizdict.businID.HCLC_CvlEngExp.1}" valueField="code_value_id"/>
                    <a:field name="voctype_display" displayField="code_value_name" options="voctype_ds" returnField="voctype" valueField="code_value_id"/>
                    <a:field name="prjplc_display" displayField="code_value_name" options="prjplc_ds" returnField="prjplc" valueField="code_value_id"/>
                    <a:field name="workcontent_display" displayField="code_value_name" options="workcontent_ds" returnField="workcontent" valueField="code_value_id"/>
                    <a:field name="hownership_display" displayField="code_value_name" options="hownership_ds" returnField="hownership" valueField="code_value_id"/>
                    <a:field name="other_incsrc_display" displayField="code_value_name" options="other_incsrc_ds" returnField="other_incsrc" valueField="code_value_id"/>
                    <a:field name="spousectitype_display" displayField="code_value_name" options="spousectitype_ds" returnField="spousectitype" valueField="code_value_id"/>
                    <a:field name="numofdep_display" displayField="code_value_name" options="numofdep_ds" returnField="numofdep" valueField="code_value_id"/>
                    <a:field name="fassets_display" displayField="code_value_name" options="fassets_ds" returnField="fassets" valueField="code_value_id"/>
                    <a:field name="downpaysrc_display" displayField="code_value_name" options="downpaysrc_ds" returnField="downpaysrc" valueField="code_value_id"/>
                    <a:field name="prjstatus_display" displayField="code_value_name" options="prjstatus_ds" returnField="prjstatus" valueField="code_value_id"/>
                    <a:field name="buyer_equip_display" displayField="code_value_name" options="buyer_equip_ds" returnField="buyer_equip" valueField="code_value_id"/>
                    <a:field name="ubiety_display" displayField="code_value_name" options="ubiety_ds" returnField="ubiety" valueField="code_value_id"/>
                    <a:field name="bankbook_display" displayField="code_value_name" options="bankbook_ds" returnField="bankbook" valueField="code_value_id"/>
                    <a:field name="grab_hitachi_display" displayField="code_value_name" options="grab_hitachi_ds" returnField="grab_hitachi" valueField="code_value_id"/>
                    <a:field name="paystate_hitachi_display" displayField="code_value_name" options="paystate_hitachi_ds" returnField="paystate_hitachi" valueField="code_value_id"/>
                    <a:field name="payover_due_display" displayField="code_value_name" options="payover_due_ds" returnField="payover_due" valueField="code_value_id"/>
                    <a:field name="grab_other_display" displayField="code_value_name" options="grab_other_ds" returnField="grab_other" valueField="code_value_id"/>
                    <a:field name="paystate_other_display" displayField="code_value_name" options="paystate_other_ds" returnField="paystate_other" valueField="code_value_id"/>
                    <a:field name="otherequip_display" displayField="code_value_name" options="otherequip_ds" returnField="otherequip" valueField="code_value_id"/>
                    <a:field name="paystate_otherequip_display" displayField="code_value_name" options="paystate_otherequip_ds" returnField="paystate_otherequip" valueField="code_value_id"/>
                    <a:field name="vehicle_display" displayField="code_value_name" options="vehicle_ds" returnField="vehicle" valueField="code_value_id"/>
                    <a:field name="assetprove_display" displayField="code_value_name" options="assetprove_ds" returnField="assetprove" valueField="code_value_id"/>
                    <a:field name="loansflg_display" displayField="code_value_name" options="loansflg_ds" returnField="loansflg" valueField="code_value_id"/>
                    <a:field name="otherdebt_display" displayField="code_value_name" options="otherdebt_ds" returnField="otherdebt" valueField="code_value_id"/>
                    <a:field name="paycondition_display" displayField="code_value_name" options="paycondition_ds" returnField="paycondition" valueField="code_value_id"/>
                    <a:field name="factbuy_display" displayField="code_value_name" options="factbuy_ds" returnField="factbuy" valueField="code_value_id"/>
                    <a:field name="prjstatus_display" displayField="code_value_name" options="prjstatus_ds" returnField="prjstatus" valueField="code_value_id"/>
                    <a:field name="project_period_display" displayField="code_value_name" options="project_period_ds" returnField="project_period" valueField="code_value_id"/>
                    <a:field name="buyer_equip_display" displayField="code_value_name" options="buyer_equip_ds" returnField="buyer_equip" valueField="code_value_id"/>
                    <a:field name="guapos_display" displayField="code_value_name" options="guapos_ds" returnField="guapos" valueField="code_value_id"/>
                    <a:field name="relat_purchaser_display" displayField="code_value_name" options="relat_purchaser_ds" returnField="relat_purchaser" valueField="code_value_id"/>
                    <a:field name="guactitype_display" displayField="code_value_name" options="guactitype_ds" returnField="guactitype" valueField="code_value_id"/>
                    <a:field name="gua_regular_display" displayField="code_value_name" options="gua_regular_ds" returnField="gua_regular" valueField="code_value_id"/>
                    <a:field name="gua_regu_paystate_display" displayField="code_value_name" options="gua_regu_paystate_ds" returnField="gua_regu_paystate" valueField="code_value_id"/>
                    <a:field name="gua_grab_other_display" displayField="code_value_name" options="gua_grab_other_ds" returnField="gua_grab_other" valueField="code_value_id"/>
                    <a:field name="gua_grab_other_paystate_display" displayField="code_value_name" options="gua_grab_other_paystate_ds" returnField="gua_grab_other_paystate" valueField="code_value_id"/>
                    <a:field name="guaotherequip_display" displayField="code_value_name" options="guaotherequip_ds" returnField="guaotherequip" valueField="code_value_id"/>
                    <a:field name="guapaystate_display" displayField="code_value_name" options="guapaystate_ds" returnField="guapaystate" valueField="code_value_id"/>
                    <a:field name="guahownership_display" displayField="code_value_name" options="hownership_ds" returnField="guahownership" valueField="code_value_id"/>
                    <a:field name="guafassets_display" displayField="code_value_name" options="fassets_ds" returnField="guafassets" valueField="code_value_id"/>
                    <a:field name="guaassetprove_display" displayField="code_value_name" options="guaassetprove_ds" returnField="guaassetprove" valueField="code_value_id"/>
                    <a:field name="sec_guarelation_display" displayField="code_value_name" options="sec_guarelation_ds" returnField="sec_guarelation" valueField="code_value_id"/>
                    <a:field name="sec_guactitype_display" displayField="code_value_name" options="sec_guactitype_ds" returnField="sec_guactitype" valueField="code_value_id"/>
                    <a:field name="partner_display" displayField="code_value_name" options="partner_ds" returnField="partner" valueField="code_value_id"/>
                    <a:field name="customerflg" defaultValue="1"/>
                </a:fields>
                <a:events>
                    <a:event name="update" handler="onUpdate"/>
                </a:events>
            </a:dataSet>
        </a:dataSets>
        <a:vBox style="margin:10px;">
            <a:hBox labelWidth="150" width="790">
                <div>
                    <font color="red"><![CDATA[*]]></font>
                </div>
                <a:radio name="customerflg" id="customerflg_tf" bindTarget="user_info_ds" layout="horizontal" prompt="">
                    <a:items>
                        <a:item label="个人" value="1"/>
                        <a:item label="法人" value="2"/>
                    </a:items>
                </a:radio>
                <a:comboBox name="branchcd_display" bindTarget="user_info_ds" prompt="&lt;font color=&apos;red&apos;&gt;*&lt;/font&gt; 所属代理店(分公司)" width="130"/>
                <a:label name="score" bindTarget="user_info_ds" prompt="综合得分" readOnly="true" style="height:18px;text-align:right;float:left;border-bottom:1px solid #808080;" width="30"/>
                <a:button click="returnquery" style="float:right;" text="返回"/>
            </a:hBox>
            <a:form className="mytable" labelWidth="100" padding="0" style="background-color : #ededed" title="客户基本情况" width="790">
                <a:box column="3" labelWidth="100">
                    <a:textField name="customername" id="customername_tf" bindTarget="user_info_ds" class="myprompt" prompt="&lt;span style=&apos;color:red;&apos; id=&apos;addprompt&apos;&gt;*&lt;/span&gt; 客户名称" width="150"/>
                    <a:textField name="rptname" bindTarget="user_info_ds" prompt="△ 法人名称" width="150"/>
                    <a:textField name="grpname" bindTarget="user_info_ds" prompt="集团名称" width="150"/>
                    <a:comboBox name="ctitype_display" id="ctitype_tf" bindTarget="user_info_ds" prompt="证件类型" width="150"/>
                    <a:textField name="ctino" id="ctino_tf" bindTarget="user_info_ds" prompt="* 证件号码" required="true" width="150"/>
                    <a:comboBox name="sex_display" bindTarget="user_info_ds" prompt="性别" width="50"/>
                    <a:datePicker name="birthdt" bindTarget="user_info_ds" prompt="出生年月" width="150"/>
                    <a:comboBox name="maristatus_display" bindTarget="user_info_ds" prompt="婚姻状况" width="100"/>
                    <a:comboBox name="children_display" bindTarget="user_info_ds" prompt="子女" width="50"/>
                    <a:textField name="homtel" bindTarget="user_info_ds" prompt="△ 电话(住宅)" width="150"/>
                    <a:textField name="offtel" bindTarget="user_info_ds" prompt="(办公室)" width="150"/>
                    <a:textField name="mobtel" bindTarget="user_info_ds" prompt="(手机)" width="150"/>
                    <a:textField name="fax" bindTarget="user_info_ds" prompt="传真" width="150"/>
                    <a:comboBox name="fnledulev_display" bindTarget="user_info_ds" prompt="最高学历" width="150"/>
                    <a:textField name="age" bindTarget="user_info_ds" prompt="年龄" width="150"/>
                </a:box>
                <a:box labelWidth="100">
                    <a:textField name="araddr" bindTarget="user_info_ds" prompt="* 住址" width="408"/>
                </a:box>
                <a:box column="2" labelWidth="100">
                    <a:textField name="arzipcd" bindTarget="user_info_ds" prompt="邮政编码" width="150"/>
                    <a:hBox padding="0" prompt="房屋面积/价值">
                        <a:textField name="ararea" bindTarget="user_info_ds" prompt="" width="150"/>
                        <span style="margin-left:5px;margin-right:5px;"><![CDATA[平方米/]]></span>
                        <a:textField name="arval" bindTarget="user_info_ds" prompt="" width="150"/>
                        <span style="margin-left:5px;"><![CDATA[万元]]></span>
                    </a:hBox>
                </a:box>
                <a:box labelWidth="100">
                    <a:textField name="ntvaddr" bindTarget="user_info_ds" prompt="户籍地址" width="408"/>
                </a:box>
                <a:box column="2" labelWidth="100">
                    <a:comboBox name="domciattri_display" bindTarget="user_info_ds" options="" prompt="户籍属性" width="150"/>
                    <a:hBox padding="0" prompt="房屋面积/价值">
                        <a:textField name="domciarea" bindTarget="user_info_ds" prompt="" width="150"/>
                        <span style="margin-left:5px;margin-right:5px;"><![CDATA[平方米/]]></span>
                        <a:textField name="domicival" bindTarget="user_info_ds" prompt="" width="150"/>
                        <span style="margin-left:5px;"><![CDATA[万元]]></span>
                    </a:hBox>
                </a:box>
                <a:box column="2" labelWidth="100">
                    <a:comboBox name="entprnatr_display" bindTarget="user_info_ds" options="" prompt="公司性质" width="150"/>
                    <a:textField name="illustration" bindTarget="user_info_ds" prompt="其他说明事项" value="发往地:" width="150"/>
                </a:box>
            </a:form>
            <a:form className="mytable" padding="7" style="background-color : #ededed" title="客户信用情况" width="790">
                <a:fieldSet cellPadding="0" cellSpacing="0" className="boldField" column="3" labelWidth="100" title="新购机器工程状况">
                    <a:comboBox name="cvlengexp_display" bindTarget="user_info_ds" prompt="土方工作经验" width="140"/>
                    <a:comboBox name="voctype_display" bindTarget="user_info_ds" prompt="行业类型" width="130"/>
                    <a:comboBox name="prjplc_display" bindTarget="user_info_ds" prompt="工程位置" width="120"/>
                    <a:comboBox name="workcontent_display" bindTarget="user_info_ds" prompt="具体工作" width="140"/>
                    <a:comboBox name="partner_display" bindTarget="user_info_ds" prompt="有无合伙人" width="130"/>
                    <a:hBox padding="0" prompt="月平均工作收入">
                        <a:textField name="income" bindTarget="user_info_ds" prompt="" width="120"/>
                        <span style="margin-left:5px;margin-right:5px;"><![CDATA[万元]]></span>
                    </a:hBox>
                </a:fieldSet>
                <a:fieldSet cellPadding="0" cellSpacing="0" className="boldField" labelWidth="90" padding="0" title="资产/收入状况">
                    <a:box column="2" labelWidth="100">
                        <a:comboBox name="hownership_display" bindTarget="user_info_ds" options="" prompt="常住房屋权属" width="140"/>
                        <a:textField name="hadd" bindTarget="user_info_ds" prompt="自有产权房地址" width="373"/>
                    </a:box>
                    <a:box column="2" labelWidth="100">
                        <a:comboBox name="ubiety_display" bindTarget="user_info_ds" options="" prompt="房屋所在" width="140"/>
                        <a:hBox labelWidth="100" padding="0" prompt="">
                            <a:textField name="harea" bindTarget="user_info_ds" prompt="房屋面积/价值" width="140"/>
                            <span style="margin-left:5px;margin-right:5px;"><![CDATA[平方米/]]></span>
                            <a:textField name="hval" bindTarget="user_info_ds" prompt="" width="120"/>
                            <span style="margin-left:5px;"><![CDATA[万元]]></span>
                        </a:hBox>
                    </a:box>
                    <a:box column="2" labelWidth="100">
                        <a:textField name="operassets" bindTarget="user_info_ds" prompt="其他个人资产" width="140"/>
                        <a:hBox labelWidth="100" padding="0" prompt="">
                            <a:comboBox name="bankbook_display" bindTarget="user_info_ds" prompt="银行存折/卡" width="140"/>
                            <span style="white-space:nowrap;margin-left:5px;margin-right:5px;"><![CDATA[(银行存折/卡收支明细)]]></span>
                        </a:hBox>
                    </a:box>
                    <a:box column="3" labelWidth="125">
                        <a:comboBox name="other_incsrc_display" bindTarget="user_info_ds" prompt="有无其它收入来源" width="115"/>
                        <a:textField name="other_incsrckind" bindTarget="user_info_ds" prompt="其它收入来源种类" width="115"/>
                        <a:hBox padding="0" prompt="其它收入月平均金额">
                            <a:textField name="avmonexp" bindTarget="user_info_ds" prompt="" width="100"/>
                            <span style="margin-left:5px;margin-right:5px;"><![CDATA[万元]]></span>
                        </a:hBox>
                    </a:box>
                </a:fieldSet>
                <a:fieldSet cellPadding="0" cellSpacing="0" className="boldField" labelWidth="100" padding="0" title="配偶情况">
                    <a:box column="3" labelWidth="100">
                        <a:textField name="spousename" bindTarget="user_info_ds" prompt="* 配偶姓名" width="140"/>
                        <a:comboBox name="spousectitype_display" bindTarget="user_info_ds" prompt="* 证件类型" width="155"/>
                        <a:textField name="spousectino" bindTarget="user_info_ds" prompt="* 证件号码" width="120"/>
                        <a:datePicker name="spousebirthdt" bindTarget="user_info_ds" prompt="出生日期" width="140"/>
                        <a:textField name="spousetel" bindTarget="user_info_ds" prompt="△ 联系电话" width="155"/>
                        <a:textField name="spouseofftel" bindTarget="user_info_ds" prompt="△ 单位电话" width="120"/>
                        <a:textField name="spousecomp" bindTarget="user_info_ds" prompt="工作单位" width="140"/>
                        <a:textField name="spousecompzipcd" bindTarget="user_info_ds" prompt="邮政编码" width="155"/>
                        <span/>
                    </a:box>
                    <a:box column="2" labelWidth="100">
                        <a:textField name="spousecompadd" bindTarget="user_info_ds" prompt="单位地址" width="403"/>
                        <a:comboBox name="numofdep_display" bindTarget="user_info_ds" prompt="供养人口" width="120"/>
                    </a:box>
                </a:fieldSet>
                <a:fieldSet cellPadding="0" cellSpacing="0" className="boldField" column="3" padding="0" title="设备状况">
                    <a:vBox labelWidth="125">
                        <a:comboBox name="grab_hitachi_display" bindTarget="user_info_ds" prompt="挖掘机(日立)" width="115"/>
                        <a:comboBox name="grab_other_display" bindTarget="user_info_ds" prompt="挖掘机(其它品牌)" width="115"/>
                        <a:comboBox name="otherequip_display" bindTarget="user_info_ds" prompt="其它工程机械设备" width="115"/>
                    </a:vBox>
                    <a:vBox>
                        <a:comboBox name="paystate_hitachi_display" bindTarget="user_info_ds" prompt="支付状况" width="120"/>
                        <a:comboBox name="paystate_other_display" bindTarget="user_info_ds" prompt="支付状况" width="120"/>
                        <a:comboBox name="paystate_otherequip_display" bindTarget="user_info_ds" prompt="支付状况" width="120"/>
                    </a:vBox>
                    <a:vBox labelWidth="100">
                        <a:comboBox name="payover_due_display" bindTarget="user_info_ds" prompt="支付逾期记录" width="120"/>
                        <div style="height:20px;"/>
                        <a:comboBox name="vehicle_display" bindTarget="user_info_ds" prompt="交通工具" width="120"/>
                    </a:vBox>
                    <!--
                    <a:box cellPadding="0" cellSpacing="0" column="3">
                        <a:comboBox name="grab_hitachi_display" bindTarget="user_info_ds" prompt="挖掘机(日立)" width="115"/>
                        <a:comboBox name="paystate_hitachi_display" bindTarget="user_info_ds" prompt="支付状况" width="120"/>
                        <a:comboBox name="payover_due_display" bindTarget="user_info_ds" prompt="支付逾期记录" width="120"/>
                    </a:box>
                    <a:box cellPadding="0" cellSpacing="0" column="2" labelWidth="125">
                        <a:comboBox name="grab_other_display" bindTarget="user_info_ds" prompt="挖掘机(其它品牌)" width="115"/>
                        <a:comboBox name="paystate_other_display" bindTarget="user_info_ds" prompt="支付状况" width="120"/>
                    </a:box>
                    <a:box cellPadding="0" cellSpacing="0" column="3" labelWidth="125">
                        <a:comboBox name="otherequip_display" bindTarget="user_info_ds" prompt="其它工程机械设备" width="115"/>
                        <a:comboBox name="paystate_otherequip_display" bindTarget="user_info_ds" prompt="支付状况" width="120"/>
                        <a:comboBox name="vehicle_display" bindTarget="user_info_ds" prompt="交通工具" width="120"/>
                    </a:box>
                    -->
                </a:fieldSet>
                <a:fieldSet cellPadding="0" cellSpacing="0" className="boldField" padding="0" title="交通工具1">
                    <a:box cellPadding="0" cellSpacing="0" column="2" labelWidth="100">
                        <a:textField name="vtype1" bindTarget="user_info_ds" prompt="车辆类型" width="140"/>
                        <a:textField name="vbrand1" bindTarget="user_info_ds" prompt="品牌" width="155"/>
                    </a:box>
                    <a:box column="3" labelWidth="100">
                        <a:textField name="numplate1" bindTarget="user_info_ds" prompt="车牌号码" width="140"/>
                        <a:datePicker name="purtime1" bindTarget="user_info_ds" prompt="购买时间" width="155"/>
                        <a:hBox bindTarget="user_info_ds" padding="0" prompt="购买价格">
                            <a:textField name="purpri1" bindTarget="user_info_ds" prompt="" width="110"/>
                            <span style="margin-left:5px;margin-right:5px;"><![CDATA[万元]]></span>
                        </a:hBox>
                    </a:box>
                </a:fieldSet>
                <a:fieldSet cellPadding="0" cellSpacing="0" className="boldField" padding="0" title="交通工具2">
                    <a:box cellPadding="0" cellSpacing="0" column="2" labelWidth="100">
                        <a:textField name="vtype2" bindTarget="user_info_ds" prompt="车辆类型" width="140"/>
                        <a:textField name="vbrand2" bindTarget="user_info_ds" prompt="品牌" width="155"/>
                    </a:box>
                    <a:box column="3" labelWidth="100">
                        <a:textField name="numplate2" bindTarget="user_info_ds" prompt="车牌号码" width="140"/>
                        <a:datePicker name="purtime2" bindTarget="user_info_ds" prompt="购买时间" width="155"/>
                        <a:hBox padding="0" prompt="购买价格">
                            <a:textField name="purpri2" bindTarget="user_info_ds" prompt="" width="110"/>
                            <span style="margin-left:5px;margin-right:5px;"><![CDATA[万元]]></span>
                        </a:hBox>
                    </a:box>
                </a:fieldSet>
                <a:fieldSet cellPadding="0" cellSpacing="0" className="boldField" padding="0" title="工程机械设备1">
                    <a:box column="3" labelWidth="100">
                        <a:textField name="ename1" bindTarget="user_info_ds" prompt="设备名称" width="140"/>
                        <a:textField name="ebrand1" bindTarget="user_info_ds" prompt="品牌" width="155"/>
                        <a:textField name="emodelcd1" bindTarget="user_info_ds" prompt="机型" width="110"/>
                    </a:box>
                    <a:box column="4" labelWidth="100">
                        <a:textField name="eqty1" bindTarget="user_info_ds" prompt="数量" width="140"/>
                        <a:datePicker name="epurtime1" bindTarget="user_info_ds" prompt="购买时间" width="155"/>
                        <a:textField name="epurpri1" bindTarget="user_info_ds" prompt="购买价" width="110"/>
                        <span style="margin-left:5px;margin-right:5px;"><![CDATA[万元]]></span>
                    </a:box>
                    <a:box column="4" labelWidth="100">
                        <a:hBox padding="0" prompt="未结清货款">
                            <a:textField name="ebalance1" bindTarget="user_info_ds" width="140"/>
                        </a:hBox>
                        <a:textField name="debt1" bindTarget="user_info_ds" prompt="&lt;span style=&apos;float:left;&apos;&gt;万元&lt;/span&gt;&lt;span&gt;债务状况&lt;/span&gt;" width="155"/>
                        <a:textField name="mortagage1" bindTarget="user_info_ds" prompt="抵押状况" width="110"/>
                    </a:box>
                </a:fieldSet>
                <a:fieldSet cellPadding="0" cellSpacing="0" className="boldField" labelWidth="100" padding="0" title="工程机械设备2">
                    <a:box column="3" labelWidth="100">
                        <a:textField name="ename2" bindTarget="user_info_ds" prompt="设备名称" width="140"/>
                        <a:textField name="ebrand2" bindTarget="user_info_ds" prompt="品牌" width="155"/>
                        <a:textField name="emodelcd2" bindTarget="user_info_ds" prompt="机型" width="110"/>
                    </a:box>
                    <a:box column="4" labelWidth="100">
                        <a:textField name="eqty2" bindTarget="user_info_ds" prompt="数量" width="140"/>
                        <a:datePicker name="epurtime2" bindTarget="user_info_ds" prompt="购买时间" width="155"/>
                        <a:textField name="epurpri2" bindTarget="user_info_ds" prompt="购买价" width="110"/>
                        <span style="margin-left:5px;margin-right:5px;"><![CDATA[万元]]></span>
                    </a:box>
                    <a:box column="4" labelWidth="100">
                        <a:textField name="ebalance2" bindTarget="user_info_ds" prompt="未结清货款" width="140"/>
                        <a:textField name="debt2" bindTarget="user_info_ds" prompt="&lt;span style=&apos;float:left;&apos;&gt;万元&lt;/span&gt;&lt;span&gt;债务状况&lt;/span&gt;" width="155"/>
                        <a:textField name="mortagage2" bindTarget="user_info_ds" prompt="抵押状况" width="110"/>
                    </a:box>
                </a:fieldSet>
                <a:fieldSet cellPadding="0" cellSpacing="0" className="boldField" labelWidth="100" padding="0" title="工程机械设备3">
                    <a:box column="3" labelWidth="100">
                        <a:textField name="ename3" bindTarget="user_info_ds" prompt="设备名称" width="140"/>
                        <a:textField name="ebrand3" bindTarget="user_info_ds" prompt="品牌" width="155"/>
                        <a:textField name="emodelcd3" bindTarget="user_info_ds" prompt="机型" width="110"/>
                    </a:box>
                    <a:box column="4" labelWidth="100">
                        <a:textField name="eqty3" bindTarget="user_info_ds" prompt="数量" width="140"/>
                        <a:datePicker name="epurtime3" bindTarget="user_info_ds" prompt="购买时间" width="155"/>
                        <a:textField name="epurpri3" bindTarget="user_info_ds" prompt="购买价" width="110"/>
                        <span style="margin-left:5px;margin-right:5px;"><![CDATA[万元]]></span>
                    </a:box>
                    <a:box column="4" labelWidth="100">
                        <a:textField name="ebalance3" bindTarget="user_info_ds" prompt="未结清货款" width="140"/>
                        <a:textField name="debt3" bindTarget="user_info_ds" prompt="&lt;span style=&apos;float:left;&apos;&gt;万元&lt;/span&gt;&lt;span&gt;债务状况&lt;/span&gt;" width="155"/>
                        <a:textField name="mortagage3" bindTarget="user_info_ds" prompt="抵押状况" width="110"/>
                    </a:box>
                </a:fieldSet>
                <a:fieldSet cellPadding="0" cellSpacing="0" className="boldField" column="6" labelWidth="90" padding="0" title="其他资产">
                    <a:comboBox name="fassets_display" bindTarget="user_info_ds" prompt="固定资产" width="120"/>
                    <a:comboBox name="assetprove_display" bindTarget="user_info_ds" prompt="资产证明资料" width="150"/>
                    <a:hBox labelWidth="60" padding="0">
                        <a:numberField name="capital" allowDecimals="false" allowNegative="false" bindTarget="user_info_ds" prompt="资本金" width="40"/>
                        <span style="margin-left:5px;"><![CDATA[万元]]></span>
                    </a:hBox>
                    <a:numberField name="capitalinputed" allowDecimals="false" allowNegative="false" bindTarget="user_info_ds" prompt="资本金到位额" width="40"/>
                    <span style=""><![CDATA[万元]]></span>
                </a:fieldSet>
                <a:fieldSet cellPadding="0" cellSpacing="0" className="boldField" labelWidth="90" padding="0" title="信用状況">
                    <a:box cellPadding="0" cellSpacing="0" column="5" labelWidth="90">
                        <a:comboBox name="loansflg_display" bindTarget="user_info_ds" prompt="银行贷款" width="50"/>
                        <a:textField name="loansbankname" bindTarget="user_info_ds" prompt="贷款银行" width="90"/>
                        <a:textField name="loansamt" bindTarget="user_info_ds" prompt="* 贷款金额" width="80"/>
                        <span style="margin-left:5px;margin-right:5px;"><![CDATA[万元]]></span>
                        <a:datePicker name="loanscleardt" bindTarget="user_info_ds" prompt="* 贷款结束期" width="100"/>
                        <a:comboBox name="otherdebt_display" bindTarget="user_info_ds" prompt="其他借款" width="50"/>
                        <a:textField name="creditor" bindTarget="user_info_ds" prompt="* 债权人" width="90"/>
                        <a:textField name="debtamt" bindTarget="user_info_ds" prompt="* 债务金额" width="80"/>
                        <span style="margin-left:5px;margin-right:5px;"><![CDATA[万元]]></span>
                        <a:datePicker name="debtcleardt" bindTarget="user_info_ds" prompt="* 还款结束期" width="100"/>
                    </a:box>
                </a:fieldSet>
                <a:fieldSet cellPadding="0" cellSpacing="0" className="boldField" padding="0" title="本次购机情况">
                    <a:box cellPadding="0" cellSpacing="0" column="3" labelWidth="115" padding="0">
                        <a:comboBox name="downpaysrc_display" bindTarget="user_info_ds" prompt="* 首付款来源" width="120"/>
                        <a:hBox labelWidth="80" prompt="">
                            <a:comboBox name="paycondition_display" bindTarget="user_info_ds" prompt="* 支付条件" width="100"/>
                        </a:hBox>
                        <a:hBox labelWidth="160" prompt="">
                            <a:comboBox name="factbuy_display" bindTarget="user_info_ds" prompt="* 合同签订人与实际购买人" width="160"/>
                        </a:hBox>
                    </a:box>
                    <a:box cellPadding="0" cellSpacing="0" column="3" labelWidth="115" padding="0">
                        <a:comboBox name="prjstatus_display" bindTarget="user_info_ds" prompt="* 购机后工程情况" width="120"/>
                        <a:hBox labelWidth="80" prompt="">
                            <a:comboBox name="project_period_display" bindTarget="user_info_ds" prompt="* 工程期间" width="100"/>
                        </a:hBox>
                        <a:hBox labelWidth="125" prompt="">
                            <a:comboBox name="buyer_equip_display" bindTarget="user_info_ds" prompt="* 购机人与机器位置" width="195"/>
                        </a:hBox>
                    </a:box>
                </a:fieldSet>
            </a:form>
            <a:form className="mytable" padding="0" style="background-color : #ededed" title="担保人情况" width="790">
                <a:box cellPadding="0" cellSpacing="0" column="3" padding="0">
                    <a:vBox labelWidth="115">
                        <a:textField name="guaname" bindTarget="user_info_ds" prompt="担保人姓名" width="120"/>
                        <a:textField name="guatel" bindTarget="user_info_ds" prompt="电话" width="120"/>
                    </a:vBox>
                    <a:vBox labelWidth="70">
                        <a:comboBox name="guapos_display" bindTarget="user_info_ds" prompt="职业" width="120"/>
                        <a:textField name="guaemail" bindTarget="user_info_ds" prompt="E-Mail" width="120"/>
                    </a:vBox>
                    <a:vBox labelWidth="100">
                        <a:textField name="guafax" bindTarget="user_info_ds" prompt="Fax" width="130"/>
                        <a:textField name="guazipcd" bindTarget="user_info_ds" prompt="邮政编码" width="130"/>
                    </a:vBox>
                </a:box>
                <a:box labelWidth="115">
                    <a:textField name="guaaddr" bindTarget="user_info_ds" prompt="担保人地址" width="318"/>
                </a:box>
                <a:box cellPadding="0" cellSpacing="0" column="3" padding="0">
                    <a:vBox labelWidth="115">
                        <a:comboBox name="relat_purchaser_display" bindTarget="user_info_ds" options="" prompt="与购机人关系" width="120"/>
                    </a:vBox>
                    <a:vBox labelWidth="70">
                        <a:comboBox name="guactitype_display" bindTarget="user_info_ds" options="" prompt="证件类型" width="120"/>
                    </a:vBox>
                    <a:vBox labelWidth="100">
                        <a:textField name="guactino" bindTarget="user_info_ds" prompt="* 证件号码" width="130"/>
                    </a:vBox>
                </a:box>
                <a:box cellPadding="0" cellSpacing="0" column="2" padding="0">
                    <a:box column="2" labelWidth="115">
                        <a:comboBox name="gua_regular_display" bindTarget="user_info_ds" prompt="挖掘机保有" width="120"/>
                        <span><![CDATA[(日立机)]]></span>
                        <a:comboBox name="gua_grab_other_display" bindTarget="user_info_ds" prompt="挖掘机保有" width="120"/>
                        <span><![CDATA[(其他品牌)]]></span>
                        <a:comboBox name="guaotherequip_display" bindTarget="user_info_ds" prompt="其他设备保有状况" width="120"/>
                        <span><![CDATA[(挖掘机以外设备)]]></span>
                    </a:box>
                    <a:box column="2" labelWidth="166">
                        <a:comboBox name="gua_regu_paystate_display" bindTarget="user_info_ds" prompt="支付状况" width="160"/>
                        <span><![CDATA[(日立机)]]></span>
                        <a:comboBox name="gua_grab_other_paystate_display" bindTarget="user_info_ds" prompt="支付状况" width="160"/>
                        <span><![CDATA[(其他品牌)]]></span>
                        <a:comboBox name="guapaystate_display" bindTarget="user_info_ds" prompt="支付状況" width="160"/>
                        <span><![CDATA[(挖掘机以外设备)]]></span>
                    </a:box>
                </a:box>
                <a:box cellPadding="0" cellSpacing="0" column="3" padding="0">
                    <a:vBox labelWidth="115">
                        <a:comboBox name="guahownership_display" bindTarget="user_info_ds" prompt="常住房屋权属" width="120"/>
                        <a:textField name="guarptname" bindTarget="user_info_ds" prompt="法人代表" width="120"/>
                        <a:textField name="guacontacttel" bindTarget="user_info_ds" prompt="联系人电话" width="120"/>
                        <a:textField name="guabankname" bindTarget="user_info_ds" prompt="银行" width="120"/>
                    </a:vBox>
                    <a:vBox labelWidth="70">
                        <a:comboBox name="guafassets_display" bindTarget="user_info_ds" prompt="固定资产" width="120"/>
                        <a:textField name="guacontactname" bindTarget="user_info_ds" prompt="联系人" width="120"/>
                        <a:textField name="guacontactfax" bindTarget="user_info_ds" prompt="联系人Fax" width="120"/>
                        <a:textField name="guaaccname" bindTarget="user_info_ds" prompt="户名" width="120"/>
                    </a:vBox>
                    <a:vBox labelWidth="100">
                        <a:comboBox name="guaassetprove_display" bindTarget="user_info_ds" prompt="资产证明资料" width="150"/>
                        <a:textField name="guacontacpos" bindTarget="user_info_ds" prompt="职业" width="130"/>
                        <a:textField name="guafininchg" bindTarget="user_info_ds" prompt="财务担当" width="130"/>
                        <a:textField name="guaaccount" bindTarget="user_info_ds" prompt="帐号" width="130"/>
                    </a:vBox>
                </a:box>
                <!--
                <a:box cellPadding="0" cellSpacing="0" column="3" labelWidth="115">
                    <a:textField name="guaname" bindTarget="user_info_ds" prompt="担保人姓名" width="120"/>
                    <a:comboBox name="guapos_display" bindTarget="user_info_ds" prompt="职业" width="120"/>
                    <a:textField name="guaemail" bindTarget="user_info_ds" prompt="E-Mail" width="120"/>
                    <a:textField name="guatel" bindTarget="user_info_ds" prompt="电话" width="120"/>
                    <a:textField name="guafax" bindTarget="user_info_ds" prompt="Fax" width="120"/>
                    <a:textField name="guazipcd" bindTarget="user_info_ds" prompt="邮政编码" width="120"/>
                </a:box>
                <a:box labelWidth="115">
                    <a:textField name="guaaddr" bindTarget="user_info_ds" prompt="担保人地址" width="363"/>
                </a:box>
                <a:box cellPadding="0" cellSpacing="0" column="3" labelWidth="115">
                    <a:comboBox name="relat_purchaser_display" bindTarget="user_info_ds" options="" prompt="与购机人关系" width="120"/>
                    <a:comboBox name="guactitype_display" bindTarget="user_info_ds" options="" prompt="证件类型" width="120"/>
                    <a:textField name="guactino" bindTarget="user_info_ds" prompt="* 证件号码" width="120"/>
                </a:box>
                <a:box cellPadding="0" cellSpacing="0" column="4" labelWidth="115">
                    <a:comboBox name="gua_regular_display" bindTarget="user_info_ds" prompt="挖掘机保有" width="120"/>
                    <span ><![CDATA[(日立机)]]></span>
                    <a:comboBox name="gua_regu_paystate_display" bindTarget="user_info_ds" prompt="支付状况" width="120"/>
                    <span ><![CDATA[(日立机)]]></span>
                    <a:comboBox name="gua_grab_other_display" bindTarget="user_info_ds" prompt="挖掘机保有" width="120"/>
                    <span ><![CDATA[(其他品牌)]]></span>
                    <a:comboBox name="gua_grab_other_paystate_display" bindTarget="user_info_ds" prompt="支付状况" width="120"/>
                    <span ><![CDATA[(其他品牌)]]></span>
                    <a:comboBox name="guaotherequip_display" bindTarget="user_info_ds" prompt="其他设备保有状况" width="120"/>
                    <span ><![CDATA[(挖掘机以外设备)]]></span>
                    <a:comboBox name="guapaystate_display" bindTarget="user_info_ds" prompt="支付状況" width="120"/>
                    <span ><![CDATA[(挖掘机以外设备)]]></span>
                </a:box>                
                <a:box cellPadding="0" cellSpacing="0" column="3" labelWidth="115">
                    <a:comboBox name="guahownership_display" bindTarget="user_info_ds" prompt="常住房屋权属" width="120"/>
                    <a:comboBox name="guafassets_display" bindTarget="user_info_ds" prompt="固定资产" width="120"/>
                    <a:comboBox name="guaassetprove_display" bindTarget="user_info_ds" prompt="资产证明资料" width="120"/>
                    <a:textField name="guarptname" bindTarget="user_info_ds" prompt="法人代表" width="120"/>
                    <a:textField name="guacontactname" bindTarget="user_info_ds" prompt="联系人" width="120"/>
                    <a:textField name="guacontacpos" bindTarget="user_info_ds" prompt="职业" width="120"/>
                    <a:textField name="guacontacttel" bindTarget="user_info_ds" prompt="联系人电话" width="120"/>
                    <a:textField name="guacontactfax" bindTarget="user_info_ds" prompt="联系人Fax" width="120"/>
                    <a:textField name="guafininchg" bindTarget="user_info_ds" prompt="财务担当" width="120"/>
                    <a:textField name="guabankname" bindTarget="user_info_ds" prompt="银行" width="120"/>
                    <a:textField name="guaaccname" bindTarget="user_info_ds" prompt="户名" width="120"/>
                    <a:textField name="guaaccount" bindTarget="user_info_ds" prompt="帐号" width="120"/>
                </a:box>
                 -->
            </a:form>
            <a:form className="mytable" padding="0" style="background-color : #ededed" title="第二担保人" width="790">
                <a:box cellPadding="0" cellSpacing="0" column="3" labelWidth="115">
                    <a:textField name="sec_guaname" bindTarget="user_info_ds" prompt="担保人姓名" width="120"/>
                    <a:textField name="sec_guapos" bindTarget="user_info_ds" prompt="职业" width="120"/>
                    <a:textField name="sec_guatel" bindTarget="user_info_ds" prompt="电话" width="120"/>
                    <a:comboBox name="sec_guarelation_display" bindTarget="user_info_ds" options="" prompt="与购机人关系" width="120"/>
                    <a:comboBox name="sec_guactitype_display" bindTarget="user_info_ds" prompt="证件类型" width="120"/>
                    <a:textField name="sec_guactino" bindTarget="user_info_ds" prompt="* 证件号码" width="120"/>
                </a:box>
                <a:box labelWidth="115">
                    <a:textField name="sec_guaaddr" bindTarget="user_info_ds" prompt="担保人地址" width="363"/>
                </a:box>
            </a:form>
            <a:box cellPadding="0" cellSpacing="0" column="2" labelWidth="116">
                <a:textField name="" prompt="登记日" readOnly="true" width="80"/>
                <a:textField name="" prompt="更新日" readOnly="true" width="80"/>
            </a:box>
        </a:vBox>
        <TABLE align="center" border="0" cellpadding="0" cellspacing="0" width="98%">
            <TBODY>
                <TR>
                    <TD colspan="2" height="3"/>
                </TR>
            </TBODY>
        </TABLE>
        <a:hBox style="margin-left:7px;">
            <span style="margin-left:645px;"/>
            <a:button id="insert" click="insert" text="更新"/>
            <div><![CDATA[	]]></div>
            <a:button click="returnquery" text="返回"/>
        </a:hBox>
        <script><![CDATA[
                	//页面加载
        	
        	function loadCurrentJs()
 	{
	 	//	每次都执行的js函数
	 
	 	//showMsg();
	 	//	判断婚姻状况：已婚，则配偶信息为必填项
	
	 	SpouseInfoCheck();
	 	// [银行贷款] =有时，[贷款银行]、[贷款金额]、[贷款结束期]为必填项(*)；
	 	LoansInfoBankFlgCheck();
	 	// [其它借款] =有时，[债权人]、[债务金额]、[还款结束期]为必填项(*)。
	 	LoansInfoOtherFlgCheck();	
 	}
 	window.onload=loadCurrentJs;
 	//配偶信息是否为必填：
	//check婚姻状况:
	//	ARISTATUS(婚姻状况)=1(已婚)，则配偶信息的[姓名]、[证件类型]、[证件号码]为必填项（*）；
	//	[联系电话]、[单位电话]为选填项（△）。
	function SpouseInfoCheck() {
		        ds=$('user_info_ds');
	        	var record=ds.getCurrentRecord();
	        	var maristatus=record.get('maristatus');
	        	//alert(maristatus);
		if(maristatus != null && maristatus == "1") { //已婚
		
			record.getField('spousename').setRequired(true);
			record.getField('spousectitype').setRequired(true);
			record.getField('spousectino').setRequired(true);
			
		}
		else {
			record.getField('spousename').setRequired(false);
			record.getField('spousectitype').setRequired(false);
			record.getField('spousectino').setRequired(false);
		
		}
	}
	
	// 信用状況Check
	// [银行贷款] ="有"时，[贷款银行]、[贷款金额]、[贷款结束期]为必填项(*)；
	function  LoansInfoBankFlgCheck() {
		       ds=$('user_info_ds');
	        	var record=ds.getCurrentRecord();
	        	var loansFlg=record.get('loansflg');
	        	//alert(loansFlg);
		if(loansFlg != null && loansFlg == "1") {
			record.getField('loansbankname').setRequired(false);
			record.getField('loansamt').setRequired(false);
			record.getField('loanscleardt').setRequired(false);
		}
		else {
			record.getField('loansbankname').setRequired(true);
			record.getField('loansamt').setRequired(true);
			record.getField('loanscleardt').setRequired(true);
		}
	}
	// [其它借款] ="有"时，[债权人]、[债务金额]、[还款结束期]为必填项(*)。
	function  LoansInfoOtherFlgCheck() {
	            ds=$('user_info_ds');
	        	var record=ds.getCurrentRecord();
	        	var otherDebtFlg=record.get('otherdebt');
		
		if(otherDebtFlg != null && otherDebtFlg == "1") {
			record.getField('creditor').setRequired(false);
			record.getField('debtamt').setRequired(false);
			record.getField('debtcleardt').setRequired(false);
		}
		else {
			record.getField('creditor').setRequired(true);
			record.getField('debtamt').setRequired(true);
			record.getField('debtcleardt').setRequired(true);
		}
	}
	]]></script>
    </a:view>
</a:screen>
